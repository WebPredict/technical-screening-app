<% provide(:title, 'Select/Update Test Questions') %>

<% if @test_questions.any? %>
<div class="page-header">
  <h3>Current Test Questions for: <%= @test.name %></h3>
</div>
  <%= form_tag update_questions_path, :class => "nicesearch", :method => 'post' do %>
  <%= hidden_field_tag :id, @test.id %>
    <table class="table table-bordered">
      <tr><th><%= sortable "content", "Question" %></th><th><%= sortable "answer" %></th>
      <th><%= sortable "difficulty" %></th><th><%= sortable "question_type" %></th><th><%= sortable "category" %></th><th>Actions</th></tr>
      <% @preselect_checkboxes = true %>
      <%= render @test_questions %>
    </table>
    <%= will_paginate @test_questions %>
    <input class="btn btn-lg btn-primary" name="commit" type="submit" value="Update" />
  <% end %>
<% end %>

<h3>Select Additional Questions</h3>
<div class="row">
<%= form_tag select_questions_path, :class => "nicesearch", :method => 'get' do %>
  <%= hidden_field_tag :id, @test.id %>
    <div class="input-group">
      <%= text_field_tag :search, params[:search], :class => "form-control" %>
        <div class="input-group-btn">
            <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
        </div>
    </div>
<% end %>
</div>
</br>
<% if @questions.any? %>
  <%= form_tag submit_questions_path, :class => "nicesearch", :method => 'post' do %>
  <%= hidden_field_tag :id, @test.id %>
    <table class="table table-bordered">
      <tr><th><%= sortable "content", "Question" %></th><th><%= sortable "answer" %></th>
      <th><%= sortable "difficulty" %></th><th><%= sortable "question_type" %></th><th><%= sortable "category" %></th><th>Actions</th></tr>
      <% @preselect_checkboxes = false %>
      <%= render @questions %>
    </table>
    <%= will_paginate @questions %>
    <input class="btn btn-lg btn-primary" name="commit" type="submit" value="Add Questions" />
  <% end %>
<% end %>

