<% provide(:title, "Metrics") %>
<div class="page-header">
<h3>Metrics</h3>
</div>
<% if logged_in? %>
  <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Candidates Per Job</h3>
          </div>
          <div class="panel-body">
            <%= column_chart Candidate.unscoped.group(:job_id).count %>
          </div>
        </div>
      </div>
  </div>

  <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Candidates Per Day</h3>
          </div>
          <div class="panel-body">
            <% if Rails.env.development? %>
            <%= column_chart Candidate.unscoped.group(:job_id).count %>
            <% elsif Rails.env.production? %>
            <%= line_chart Candidate.unscoped.group_by_day(:created_at, format: "%l %P").count %>
            <% end %>
          </div>
        </div>
      </div>
  </div>
<div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Company Jobs Percentage</h3>
          </div>
          <div class="panel-body">
            <%= pie_chart Job.unscoped.group(:company_id).count %>
          </div>
        </div>
      </div>
  </div>
<% end %>
